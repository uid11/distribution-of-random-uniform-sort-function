<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Distribution generated by a random uniform sort function"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; img-src 'self' data:; script-src 'sha256-9Lw7WzElZ8yWr4BxaNIlmsmPhzpLogCuBhJCiyxtctk='; style-src 'sha256-D47Oe4CvOtIrKjWNHNWKWHUMeZkQ1s36On34Sshr6b4='; worker-src https://uid11.github.io/;"
    />
    <meta name="theme-color" content="#3367D6" />
    <title>Distribution generated by a random uniform sort function</title>
    <link
      rel="icon"
      type="image/png"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAcCAIAAABkl5F2AAAAA3NCSVQICAjb4U/gAAAAGXRFWHRTb2Z0d2FyZQBnbm9tZS1zY3JlZW5zaG907wO/PgAAAjBJREFUSIlj5BUUZ6ALYKKPNaM2UQhY0PjRkUF9nfUQ9q9fv969/3jnzv0Dh44vXrbmw8dPlNiEz09sbGwS4qI21mY1lfmnj233cHOkvk1///6TUzVT1ba2dvQvLGu4ffc+Hy/PvJl9ttbmVLaJgYHh58+fnz5/uXP3wbIV6928I8+eu8TMzNTXVc/MTGbUEqXt27fv1Q2dDAwMcrLSTg42cPEVi6e/fHQxLTkGTf3R/RtfPrro6e5Esk0MDAznL1x5+uwFAwODi5MtkVrQAAlBcf3GbQYGBl1tDZrb9Oz5SwYGBgkJMZrb9P37dwYGBl5eHprb9P8/eVaQbhMXFycDA8Pnz19obpOkpDgDA8PLl68JqmRkZKTIJi11FQYGhstXb8BF/v37x8DAgJmXhYUFybfJQF9bWlqSgYFh7/4jcMFv378zMDCICAshqxQQ4Bfg5yPTJk5Ojub6MgYGhidPn+/dfxgu/ujRUwYGBnMzQ2TFMZFBWA3BaRM7OzsvD7eSolxUeMCuLcvNTAz+/ftXVNb4589fuJrDR08yMDCYGhvkZSXx8HCzsrAE+HkU5qZ++/Yd00D0+gkCmJmZHt0+hSzy+cvX/OLag4ePIwseOHT89NkLpsYG1RX5VeV5//79Z2Zmmjh1rreHs4qyAlE2QcDv37/ff/h4+/b9g4ePL1y65sOHj2gK/v//H5uUX1dV6OHqwMXFeffegzkLli9bsd7bwxnTNMbRVtioTSgAALv7u3vJS2NwAAAAAElFTkSuQmCC"
    />
    <style>
      #graph {
        border: 1px solid grey;

        margin: 8px;
        position: relative;
      }

      form {
        display: flex;
      }

      h3 {
        margin: 12px 0;
      }

      input {
        margin: 0 4px;
      }

      label {
        padding: 1px 0 1px 5px;
      }

      pre {
        margin: 0;
      }

      .point {
        background-color: black;
        border: 1px solid yellow;
        border-radius: 2px;

        position: absolute;
        width: 2px;
        height: 2px;
      }
    </style>
    <script type="module">
      const generateUniformDistributionArray = (length) => {
        const array = [];

        for (let i = 0; i < length; i += 1) {
          array.push(Math.round(length * Math.random()));
        }

        return array;
      };
      const sortFunction = () => (Math.random() > 0.5 ? 1 : -1);

      const generateDistribution = (length) => {
        const distribution = Array(length).fill(0);
        const numbers = Array(length)
          .fill()
          .map((_, i) => i);
        const repeats = Number(numberOfRepeats.value);

        for (let repeat = 0; repeat < repeats; repeat += 1) {
          const sortedNumbers = [...numbers].sort(sortFunction);

          for (let i = 0; i < length; i += 1) {
            distribution[i] += sortedNumbers[i];
          }
        }

        for (let i = 0; i < length; i += 1) {
          distribution[i] = distribution[i] / repeats;
        }

        return distribution;
      };

      const generateUniformDistribution = (length) => {
        const distribution = Array(length).fill(0);
        const repeats = Number(numberOfRepeats.value);

        for (let repeat = 0; repeat < repeats; repeat += 1) {
          const uniformNumbers = generateUniformDistributionArray(length);

          for (let i = 0; i < length; i += 1) {
            distribution[i] += uniformNumbers[i];
          }
        }

        for (let i = 0; i < length; i += 1) {
          distribution[i] = distribution[i] / repeats;
        }

        return distribution;
      };

      const draw = () => {
        graph.innerHTML = "";

        const length = Number(arrayLength.value);
        const distribution = uniformDistribution.checked
          ? generateUniformDistribution(length)
          : generateDistribution(length);
        const width = Number(widthOfGraph.value);
        const height = Number(heightOfGraph.value);

        graph.style.width = `${width}px`;
        graph.style.height = `${height}px`;

        const points = [];

        for (let index = 0; index < length; index += 1) {
          const point = document.createElement("div");

          point.className = "point";

          const value = distribution[index];

          const bottom = Math.round((height * value) / length);
          const left = Math.round((width * index) / length);

          point.style.bottom = `${bottom}px`;
          point.style.left = `${left}px`;

          points.push(point);
        }

        graph.append(...points);
      };

      drawGraph.addEventListener("click", draw);
    </script>
  </head>
  <body>
    <h3>Distribution generated by a random uniform sort function</h3>
    <pre>
// [0, 1, 2, ..., 99]
const numbers = Array(100).fill().map((_, i) => i);

const sortFunction = () => (Math.random() > 0.5 ? 1 : -1);

const distribution = [...numbers].sort(sortFunction);
    </pre>
    <form action="#">
      <button id="drawGraph" type="submit">Draw graph</button>
      <label for="uniformDistribution">Uniform distribution:</label
      ><input id="uniformDistribution" type="checkbox" />
      <label for="numberOfRepeats">Number of repeats:</label
      ><input
        id="numberOfRepeats"
        inputmode="numeric"
        size="3"
        type="text"
        value="10000"
      />
      <label for="arrayLength">Array length:</label
      ><input
        id="arrayLength"
        inputmode="numeric"
        size="3"
        type="text"
        value="400"
      />
      <label for="widthOfGraph">Width of graph:</label
      ><input
        id="widthOfGraph"
        inputmode="numeric"
        size="3"
        type="text"
        value="800"
      />
      <label for="heightOfGraph">Height of graph:</label
      ><input
        id="heightOfGraph"
        inputmode="numeric"
        size="3"
        type="text"
        value="600"
      />
    </form>
    <div id="graph"></div>
  </body>
</html>
